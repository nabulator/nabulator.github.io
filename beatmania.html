<!doctype html>





<head>
    <meta charset="utf-8">

    <title>davleop</title>

        <meta name="google-site-verification" content="designing arcade style controllers and other random tech stuff">
    
    <meta name="title" content="davleop">
    <meta name="description" content="I build garbage from garbage.">
    <meta name="keywords" content="EE, DIY, woodworking, hacking, bemani, arcade">
    <meta name="author" content="davleop">
    <meta name="Copyright" content="CC-BY 4.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="davleop" />
    <meta property="og:description" content="I build garbage from garbage." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://davleop.com/beatmania.html" />
    <meta property="og:image" content="https://davleop.com/img/favicon.png" />

    <link rel="stylesheet" href="./lolstyle.css">
    
</head>

<body>
<div>
    <header>
        </header>
    <article>










<a name="beatmania-build"></a>
<h1>beatmania build</h1>

<p>October 2019</p>

<p>In this page, I build a simple beatmania IIDX controller for PC with wood, some plastic from
china, some parts from ebay for $200. The guide is based of github project [here][]. My
build differs in that only 2x4 is used instead of MDF. My turntable build is also somewhat
unique.</p>

<a name="Table-of-Contents"></a>
<h1>Table of Contents</h1>

<ol>
<li><a href="#Introduction">Intro</a></li>
<li><a href="#A-Modular-Design">Design</a></li>
<li><a href="#The-Keys">The Keys</a></li>
<li><a href="#Turntable">Turntable</a></li>
<li><a href="#Future-Work">Future Work</a></li>
<li><a href="#append">Appendix</a>

<ol>
<li><a href="#links">Links</a></li>
<li><a href="#footnotes">Footnotes</a></li>
</ol>
</li>
</ol>


<a name="Introduction"></a>
<h2>Introduction</h2>

<p>Beatmania (1997) is game where you hit buttons to trigger sound effects, usually to some musical
effect. It&rsquo;s no different from jamming on a Akai MPC, except the controls are clearly
modelled after a combination of the turntable and piano layouts. And you&rsquo;re playing a
rhythm game so you better be following the rhythm. The game enjoyed enough popularity in
Japan where it has spawned a bunch of related games both at Konami and abroad, and it is
still being re-released in Japan.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<p>Then I gave it back. Back to the keyboard age.</p>

<a name="A-Modular-Design"></a>
<h2>A Modular Design</h2>

<p><img src="./img/iidxlayout.gif" alt="layout" /></p>

<p>They are two opposite &ldquo;sides&rdquo; (Player 1, Player 2) of the machine with mirrored layouts of
the controller. A nice feature to have would be to allow the switching between two
layouts. I decided to split the turntable and go with magnets! Two matching alignment pins
and magnets are used in this build.</p>

<a name="The-keys"></a>
<h2>The keys</h2>

<p>This is the easier half!</p>

<p><img src="./img/iidxkeystop.jpg" alt="Final Keys" /></p>

<p style="text-align:center;"> Here are the final keys from the top</p>

<p>To create the panel for mounting the buttons, a lazer cutter was used to cut into &frac14;"
scrap acrylic and &frac14;" plywood. Both take the pounding of a iidx player no problem.
An old Controller PCB was scraped from an old DAO from my
friend BCS (Thanks!). The wiring for the PCB required Molex JST headers and pins which
where crimped with a proper crimper. I only had 18 AWG wire at that time which was
slightly to thick, I originally fitted the wires in a different sized cardboard box (which
quickly fell apart) so some wire management was necessary.</p>

<p><img src="./img/iidxkeysinner.jpg" alt="keys insides" /></p>

<p>Of course I <em>had</em> to upgrade the switches to the arcade official! I eventually going to
Rakuten, the ebay of Japan and buying the official Sanwa (三和電子）buttons and springs.
The buttons in this picture show the cheaper ones I bought from eBay for around $20 including
shipping.</p>

<p><img src="./img/iidxkeyscloseup.jpg" alt="closeup" /></p>

<p>As with any mechanical controller, easy access to the panel is desirable. Thus, a magnetic
bottom was designed to be easily removable. The bottom also had heavy-duty furniture style
rubber feet to prevent slipping during play.</p>

<p><img src="./img/iidxkeysside.jpg" alt="side alignment pins" /></p>

<p style="text-align:center;"> alignment holes and magnets. Meant for mating with the controller! They are on both
sides of the controller of course</p>

<a name="Turntable"></a>
<h2>Turntable</h2>

<p>This is arguably the more complicated part of the project. The official and DAO
controllers use what amounts to a massive <a href="https://en.wikipedia.org/wiki/Incremental_encoder">incremental encoders</a>. Additionally the
mechanical aspect is a little complicated. I also needed a method to interface with the
PC. The DAO controller had an <em>additional</em> microcontroller to convert the encoder to
trigger two buttons. I wanted to reuse this component but I accidentally <strong>destroyed</strong> it
by reversing the power pins and frying the Microcontroller. Oops.</p>

<p>I ended up choosing to use a cheap ball bearings from ebay meant for a rotating platter
and a rotation encoder with an extended shaft. A face bearing secured the rod to allow
rotations to register in the sensor.</p>

<p><img src="./img/iidxdesign.jpg" alt="Turntable Design" /></p>

<p>Electronically, I was able to hack a mechanical mouse together and reuse the components.
This was an old mouse that outputs PS/2 signal. Most modern PCs require a USB adapter. A
funny consequence of wiring the sensor in parallel is that I was able to run both the
mouse <em>and</em> the wheel at the same time! Apparently, the load resistance of the sensor was
enough to register in the microcontroller of the mouse.</p>

<p><img src="./img/iidxmouseinternals.jpg" alt="Mouse hack" /></p>

<p>In both diagrams, the blue wires to ground, orange to 5V while the green and white are the
two signals of the sensor. You can see where the original two opticoders are on the mouse.
The area between the sensors is where the incremental disk for the mouse would usually go.
The turntable is then tied directly to the X-axis of my mouse.</p>

<p><img src="./img/iidxmousesoldering.jpg" alt="mouse soldering" /></p>

<p>You see here on the breadboard I attempted to build an encoder myself from scratch. The
sensors work but making the disc and connecting the disc somewhere in my controller seemed
to be involve more work.</p>

<p><img src="./img/iidxturntable.jpg" alt="turntable" /></p>

<p>The bearing I used makes for some tricky mounting. I had to try an additional hole into
the wooden based and used pliers to screw in some nuts and bolts in the tight space
between the TT and the base.</p>

<p>The final turntable itself was made out &frac14;" plywood with electric tape as the surface.
Felt is probably a little better but slip-free rubber is probably the best. The encoder
works great.</p>

<a name="Future-Work"></a>
<h2>Future Work</h2>

<p>Functional-wise the controller is excellent. Buttons and turntables are responsive and
feel just like the arcade. The controller is robust to aggressive play and feels solid.
Most complaints I have are mechanical, largely due to my poor woods craftsmanship. There
were a few failures in wire due to my poor crimping as well, but those were easily fixed.</p>

<p>The alignment pins with magnets works poorly. This is probably because the wood itself is
too heavy, and the magnets simply can&rsquo;t support more than 20 lb of weight when help
vertically on one side.  The magnets <em>can</em> support that weight, however they must be
aligned very precisely as they need to be making a solid contact with the mating metal.
Since adding magnets was a afterthought, and I could only source one type of magnet to
attach to wood (did not feel like using epoxy this time), precise alignment was difficult
to achieve.</p>

<p>The controller itself is rather heavy and large. It is difficult to hold it in one hand
and can fall apart due to it&rsquo;s weak modular connections. A more compact and lighter frame
may be desirable.</p>

<p>The angular momentum of the turntable feels slightly off, it is a little
light and the turntable itself is too light and wobbles slightly. Part of the reason is
that the plate is only mounted to the bearing in two of the four locations. Ideally,
custom manufactured bearing with the correct mounting positions is ideal.</p>

<a name="Appendix"></a>
<h2>Appendix</h2>

<a name="Links"></a>
<h3>Links</h3>

<ol type="a">
<li><a href="https://remywiki.com/Main_Page" title="Remy Wiki">Remy Wiki</a>, the authoritative fan-based Bemani site for English</li>
<li>These people make controllers if you don&rsquo;t want to build your own <a href="https://www.gamo2.com">gamo2</a>
(unaffiliated)</li>
<li><a href="http://bbr.eucaly.net/bbr3rd/bbr3rd/x2.html">Beat Beat Revolution 3rd Gen</a> A flash simulator for beatmania</li>
<li><a href="https://github.com/consandstuff/consandstuff.github.io/blob/master/rhythmcons/beatmania-iidx/iidx-small/index.md">consandstuff github build</a> includes the builds for sdvx &amp; iidx controllers</li>
<li><a href="https://www.slagcoin.com/joystick/introduction.html">slagcoin.com</a> A great resource for building arcade style fight sticks</li>
</ol>


<a name="Footnotes"></a>
<h3>Footnotes</h3>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
There&rsquo;s a lot of releases. You can find the exact number on <a href="https://remywiki.com/Main_Page" title="Remy Wiki">remywiki</a> but even
  FIFA has only had a single release a year since 1993 while this one has had more than a
  release a year in the form of numerous &ldquo;append&rdquo; versions with a new song list. To be
  fair, the main gameplay has barely changed since the beginning, with each style adding a
  few minor features. Obviously, the essential gameplay has remained unchanged at all.
  The mainline series is now on Beatmania II which for some archaic reason is dubbed
  IIDX (deluxe for their HD TV cabinets which have become the standard)<a href="#fnref:1" rev="footnote">&#8617;</a></li>
</ol>
</div>

    </article>
    <aside>
<!--      <h3>Other Pages</center>
      <ul> <li> <a href="openpad.html"> Stepmania Pad </a></li>
      <li><a href="beatmania.html"> BMS Controller </a> </li> </ul>
-->
    </aside> 
    <footer>
    <hr/>
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"></a>All content on this domain (unless otherwise specified) is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> davleop.com 2021
    <br>
    <p>Last modified: 2021-04-19
 </p>
    </footer>
</div>

</body>
</html>
